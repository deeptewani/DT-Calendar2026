<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Durga Temple Calendar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7f7f7; }
        .festival-text { font-weight: 600; color: #dc2626; }
        .pooja-text { color: #059669; font-style: italic; }
        .calendar-card { transition: transform 0.2s; }
        .calendar-card:hover { transform: translateY(-3px); }
        .notes { font-size: 0.75rem; color: #4b5563; padding-left: 0.75rem; border-left: 2px solid #fcd34d; margin-top: 0.25rem; }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-6xl mx-auto">
        <header class="text-center mb-10 py-8 px-4 bg-blue-50 rounded-xl shadow-lg border-t-4 border-red-700">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-red-800 tracking-wider uppercase">Durga Temple of St. Louis</h1>
            <p class="mt-2 text-sm sm:text-base text-red-700 italic">या देवी सर्व भूतेषु मातृ रूपेण संस्थिता । नमस्तस्यै नमस्तस्यै नमस्तस्यै नमो नमः ॥</p>
            <p class="mt-4 text-gray-700 font-bold">1431 MO - 109, Glencoe, MO 63038 | 636-344-0282</p>
        </header>

        <div id="loading" class="text-center text-xl text-gray-500 py-20">Loading calendar data...</div>

        <div id="calendar-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 hidden">
            </div>

        <div class="mt-12 p-6 bg-white rounded-xl shadow-md border border-gray-100">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Legend</h2>
            <div class="flex flex-wrap gap-6">
                <span class="flex items-center text-green-700 font-semibold italic">
                    <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span> Custom Monthly Pooja
                </span>
                <span class="flex items-center text-red-700 font-semibold">
                    <span class="w-3 h-3 bg-red-500 rounded-full mr-2"></span> Major Hindu Festival
                </span>
            </div>
        </div>
    </div>

    <script>
        // Simple CSV to JSON parser
        function parseCSV(text) {
            const lines = text.split('\n').filter(line => line.trim() !== '');
            const headers = lines[0].split(',');
            return lines.slice(1).map(line => {
                const values = line.split(',');
                return headers.reduce((obj, header, i) => {
                    obj[header.trim()] = values[i] ? values[i].trim() : '';
                    return obj;
                }, {});
            });
        }

        async function initCalendar() {
            try {
               // const response = await fetch('https://github.com/deeptewani/DT-Calendar2026/blob/be16265898953af3123357720dfbeaadad54894e/events_2026.csv');
               const response = await fetch('https://deeptewani.github.io/DT-Calendar2026/events_2026.csv');
            
                  // 'https://raw.githubusercontent.com/deeptewani/DT-Calendar2026/main/events_2026.csv',
                //'https://raw.githubusercontent.com/deeptewani/DT-Calendar2026/c679f19a84eb98f9949fb8dfff0f4504817666a6/events_2026.csv',
              //  'https://deeptewani.github.io/DT-Calendar2026/events_2026.csv'
            //];
                
                
                const csvData = await response.text();
                const events = parseCSV(csvData);

                // Group by month
                const grouped = events.reduce((acc, event) => {
                    if (!acc[event.Month]) acc[event.Month] = [];
                    acc[event.Month].push(event);
                    return acc;
                }, {});

                const grid = document.getElementById('calendar-grid');
                const loading = document.getElementById('loading');

                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                months.forEach(month => {
                    if (grouped[month]) {
                        grid.innerHTML += createMonthCard(month, grouped[month]);
                    }
                });

                loading.classList.add('hidden');
                grid.classList.remove('hidden');

            } catch (error) {
                console.error("Error loading CSV:", error);
                document.getElementById('loading').innerText = "Error loading calendar. Please ensure events_2026.csv is in the same folder.";
            }
        }

        function createMonthCard(month, events) {
            const eventItems = events.map(e => `
                <li class="flex items-start space-x-3 p-2 border-b border-gray-50 last:border-0">
                    <div class="w-10 text-center flex-shrink-0">
                        <span class="block text-xl font-bold text-amber-700">${e.Date}</span>
                        <span class="block text-[10px] uppercase text-gray-400 font-bold">${e.Day}</span>
                    </div>
                    <div class="flex-grow">
                        <span class="text-sm px-2 py-0.5 rounded-md ${e.Type === 'festival' ? 'bg-red-50 festival-text' : 'bg-green-50 pooja-text'}">
                            ${e.Name}
                        </span>
                        ${e.Notes ? `<p class="notes">${e.Notes}</p>` : ''}
                    </div>
                </li>
            `).join('');

            return `
                <div class="calendar-card bg-white p-5 rounded-xl shadow-md border-t-4 border-green-600">
                    <h3 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">${month}</h3>
                    <ul class="space-y-2">${eventItems}</ul>
                </div>
            `;
        }

        window.onload = initCalendar;
    </script>
</body>

</html>




